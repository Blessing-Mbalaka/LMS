{% load static %} {% load widget_tweaks %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload EISA Tool | CHIETA</title>
  <!-- Global CSS -->
  <link rel="stylesheet" href="{% static 'core/css/dashboard.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
  <div class="dashboard-container">
    <div class="sidebar">
      <div class="graduate-icon">
        <img src="{% static 'core/images/logo_simplebbbbbbbbbbbbbb.png' %}" alt="CHIETA Logo" style="width:130px;">
      </div><br><br>
      <ul>
        <li><a href="{% url 'assessor_dashboard' %}" class="nav-item"><i class="fa fa-home"></i> Dashboard</a></li>
        <li><a href="{% url 'upload_assessment' %}" class="nav-item"><i class="fa fa-upload"></i> Upload Assessment</a></li>
        <li><a href="{% url 'generate_tool' %}" class="nav-item"><i class="fa fa-cogs"></i> Generate Assessment</a></li>
        <li><a href="{% url 'assessment_archive' %}" class="nav-item"><i class="fa fa-archive"></i> Assessment History</a></li>
        <li><a href="{% url 'assessor_reports' %}" class="nav-item"><i class="fa fa-chart-bar"></i> Reports</a></li>
        <li>üîî Notifications</li>
        <li>üõ†Ô∏è Help & Support</li><br><br><br><br>
        <button class="fixy">‚öôÔ∏è Settings</button>
        <button class="fix">üö™ Log Out</button>
      </ul>
      <img src="{% static 'core/images/rb_2149331949.png' %}" alt="Sidebar Art" width="199px">
    </div>

    <div class="content p-4">
      <div class="welcome-container">
        <div class="image-container">
          <img src="{% static 'core/images/rb_2148892786.png' %}" alt="Profile Picture" width="390" height="190">
        </div>
        <div class="welcome-box">
          <h2>Upload EISA Assessment Tool</h2>
          <div class="date">Generate EISA assessments tools using the Databank</div>
          <button class="gradient-button">Innovating for Impact</button>
        </div>
      </div>

      <form id="uploadForm" action="{% url 'upload_assessment' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="upload-section">
          <label for="qualification">Qualification Title</label>
          <select id="qualification" name="qualification" required>
            <option value="">-- Select Qualification --</option>
            <option value="Maintenance Planner">Maintenance Planner</option>
            <option value="Quality Controller">Quality Controller</option>
          </select>
        </div>

        <div class="upload-section">
          <label for="paperNumber">Paper Number</label>
          <input type="text" id="paperNumber" name="paper_number" placeholder="e.g. 1A, 1B" required>
        </div>

        <div class="upload-section">
          <label for="saqaID">SAQA ID</label>
          <input type="text" id="saqaID" name="saqa_id" placeholder="e.g. 123456" required>
        </div>

        <div class="upload-section">
          <label>Upload EISA Assessment</label>
          <input type="file" id="fileInput" name="file_input" accept=".pdf,.doc,.docx" required>
        </div>

        <div class="upload-section">
          <label>Upload MEMO</label>
          <input type="file" id="memoFile" name="memo_file">
        </div>

        <div class="upload-section">
          <label for="commentBox">Comment (Optional)</label>
          <textarea id="commentBox" name="comment_box" rows="3" placeholder="Write any notes..."></textarea>
        </div>

        <div class="upload-section">
          <input type="checkbox" id="forwardToModerator" name="forward_to_moderator">
          <label for="forwardToModerator">Forward this assessment directly to Moderator</label>
        </div>

        <button type="submit" class="gradient-button">Submit Upload</button>
      </form>

      <section class="submitted-section">
        <h3>Submitted Assessments</h3>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>EISA ID</th>
              <th>Qualification</th>
              <th>Paper</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for a in submissions %}
            <tr style="vertical-align: middle;">
              <td><strong>{{ a.eisa_id }}</strong></td>
              <td>{{ a.qualification }}</td>
              <td>{{ a.paper }}</td>
              <td><span class="badge {{ a.internal|lower }}">{{ a.internal }}</span></td>
              <td><a href="{% url 'view_assessment' a.eisa_id %}" class="gradient-button btn-sm" style="font-size:13px;padding:5px 12px;">‚úèÔ∏è View/Edit</a></td>
            </tr>
            {% empty %}
            <tr><td colspan="5" style="text-align:center;">No assessments submitted yet.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </section>

    </div>
  </div>
</body>
</html>
